<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>HOME</title>
        <link rel="stylesheet" href="./style.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    </head>
    <body>
        <header>

            <img src="images/logo.svg" alt="logo" class="logo">
            <div class="hamburger" onclick="toggleNav()">☰</div>
            <nav>
                <ul id="nav">
                    <li><a href="./index.html">Home</a></li>
                    <li><a href="./about.html">About</a></li>
                    <li><a href="./discipline.html">Disciplines</a></li>
                    <li><a href="./khelon.html">Khelon</a></li>
                    <li><a href="./athlete.html">Athletes</a></li>
                    <li><a href="./events.html">Events</a></li>
                    <li>
                        <a>Resources</a>
                        <ul class="dropdown">
                            <li><a href="resources\ParaGames2023.pdf">Khelo
                                    India Para Games 2023</a></li>
                            <li><a
                                    href="resources\UniversityGames2023.pdf">Khelo
                                    India University Games 2023</a></li>
                            <li><a href="resources\WinterGames2024.pdf">Khelo
                                    India Winter Games 2024</a></li>
                            <li><a href="resources\YouthGames2023.pdf">Khelo
                                    India Youth Games 2023 2.0</a></li>
                            <li><a href="resources\YouthGames20232.0.pdf">khelo
                                    India Youth Games 2023</a></li>

                        </ul>

                    </nav>
                    <a href="#" id="logoutLink" style="display: none; margin-right: 20px; color: white;">Logout</a>
                    <a href="./register.html" class="register"><button>Get
                            Involved</button></a>

                </header>

                <main>
                    <section class="intro">
                        <div class="container">
                            <div class="row">
                                <div class="col-md-12">
                                    <h1>KHELO INDIA EVENTS</h1>
                                    <p>Stay updated with the latest Khelo India events, competitions, and programs happening across the nation.</p>
                                </div>
                            </div>
                        </div>
                    </section>
            
                    <section class="events-list">
                        <div class="container">
                            <div class="row">
                                <div class="col-md-12">
                                    <h2>Upcoming Events</h2>
                                    <div id="events-grid">
                                    </div>
                                    <a href="#" class="button view-all">View All Upcoming Events</a>
                                </div>
                            </div>
                        </div>

                        <section class="add-event-form" style="display: none;">
                            <div class="container">
                                <div class="row">
                                    <div class="col-md-12">
                                        <h2>Add New Event</h2>
                                        <form id="addEventForm">
                                    <label for="eventName">Event Name:</label>
                                    <input type="text" id="eventName" name="eventName" required><br>

                                    <label for="eventDate">Date:</label>
                                    <input type="date" id="eventDate" name="eventDate" required><br>

                                    <label for="eventLocation">Location:</label>
                                    <input type="text" id="eventLocation" name="eventLocation" required><br>

                                    <label for="eventDescription">Description:</label>
                                    <textarea id="eventDescription" name="eventDescription" rows="4"></textarea><br>

                                    <button type="submit">Add Event</button>
                                </form>
                            </div>
                        </section>

                        <div id="context-menu" style="display: none; position: fixed; background-color: #f9f9f9; border: 1px solid #ccc; padding: 10px; z-index: 1000;">
                            <button id="editButton">Edit</button><br>
                            <button id="removeButton">Remove</button>
                        </div>

                        <div id="edit-event-modal" class="modal" style="display: none;">
                            <div class="modal-content container">
                                <div class="row">
                                    <div class="col-md-12">
                                        <span class="close-button">×</span>
                                        <h2>Edit Event</h2>
                                        <form id="editEventForm">
                                    <input type="hidden" id="editEventIndex">
                                    <label for="editEventName">Event Name:</label>
                                    <input type="text" id="editEventName" name="editEventName" required><br>

                                    <label for="editEventDate">Date:</label>
                                    <input type="date" id="editEventDate" name="editEventDate" required><br>

                                    <label for="editEventLocation">Location:</label>
                                    <input type="text" id="editEventLocation" name="editEventLocation" required><br>

                                    <label for="editEventDescription">Description:</label>
                                    <textarea id="editEventDescription" name="editEventDescription" rows="4"></textarea><br>

                                    <button type="submit">Save Changes</button>
                                    <button type="button" class="cancel-button">Cancel</button>
                                </form>
                            </div>
                        </div>

                </main>



                <footer class="khelo-india-footer">
                    <div class="footer-container">
                        <div class="social-info">
                            <div class="social-icons">
                                <a href="#" class="social-icon"><img
                                        src="images/fb.png"
                                        alt="Facebook"></a>
                                <a href="#" class="social-icon"><img
                                        src="images/twitter.webp"
                                        alt="Twitter"></a>
                                <a href="#" class="social-icon"><img
                                        src="images/insta.png"
                                        alt="Instagram"></a>
                                <a href="#" class="social-icon"><img
                                        src="images/yt.webp"
                                        alt="YouTube"></a>
                            </div>
                            <div class="contact-info">
                                <p>Tel No.: 01124364243</p>
                                <p>Email id: kheloindia.div@gov.in</p>
                            </div>
                        </div>
                        <div class="footer-menu">
                            <a
                                href="https://kheloindia.gov.in/privacypolicy.html">PRIVACY
                                POLICY</a>
                        </div>

                    </div>
                    <div class="copyright-area">
                        <p>© Copyright Khelo India 2022. All Rights
                            Reserved.</p>
                    </div>
                </footer>
                <script>
                    document.addEventListener('DOMContentLoaded', function() {
                         const eventsGrid = document.getElementById('events-grid');
                         const addEventFormSection = document.querySelector('.add-event-form');
                         const addEventForm = document.getElementById('addEventForm');
                         const contextMenu = document.getElementById('context-menu');
                         const editModal = document.getElementById('edit-event-modal');
                         const editEventForm = document.getElementById('editEventForm');
                         const closeEditModalButton = editModal.querySelector('.close-button');
                         const cancelEditButton = editModal.querySelector('.cancel-button');
                         const logoutLink = document.getElementById('logoutLink');
             
                         let events = JSON.parse(localStorage.getItem('events')) || [];
                         let selectedItemIndex = null;
             
                         checkLoginStatus();
                         displayEvents(events);
             
                         function checkLoginStatus() {
                             const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
                             const isAdmin = localStorage.getItem('isAdmin') === 'true';
             
                             if (isLoggedIn && isAdmin) {
                                 addEventFormSection.style.display = 'block';
                                 contextMenu.addEventListener('click', contextMenuClickHandler);
                                 logoutLink.style.display = 'block';
                             } else {
                                 addEventFormSection.style.display = 'none';
                                 contextMenu.removeEventListener('click', contextMenuClickHandler);
                                 logoutLink.style.display = 'none';
                             }
                         }
             
                         function contextMenuClickHandler(event) {
                             if (event.target.id === 'editButton') {
                                 editSelectedItem();
                             } else if (event.target.id === 'removeButton') {
                                 removeSelectedItem();
                             }
                         }
             
                         function showContextMenu(event, index) {
                             event.preventDefault();
                             contextMenu.style.left = event.pageX + 'px';
                             contextMenu.style.top = event.pageY + 'px';
                             contextMenu.style.display = 'block';
                             selectedItemIndex = index;
                         }
             
                         function hideContextMenu() {
                             contextMenu.style.display = 'none';
                             selectedItemIndex = null;
                         }
             
                         function editSelectedItem() {
                             if (selectedItemIndex !== null) {
                                 editEvent(selectedItemIndex);
                             }
                             hideContextMenu();
                         }
             
                         function removeSelectedItem() {
                             if (selectedItemIndex !== null) {
                                 removeEvent(selectedItemIndex);
                             }
                             hideContextMenu();
                         }
             
                         document.addEventListener('click', function(e) {
                             if (!contextMenu.contains(e.target)) {
                                 hideContextMenu();
                             }
                         });
             
                         function displayEvents(eventsToDisplay) {
                             eventsGrid.innerHTML = '';
                             eventsToDisplay.forEach((event, index) => {
                                 const eventCard = document.createElement('div');
                                 eventCard.classList.add('event-card');
                                 eventCard.innerHTML = `
                                     <h3>${event.name}</h3>
                                     <p>Date: ${event.date}</p>
                                     <p>Location: ${event.location}</p>
                                     <p>Description: ${event.description}</p>
                                 `;
                                 eventCard.addEventListener('contextmenu', (e) => {
                                     if (localStorage.getItem('isLoggedIn') === 'true' && localStorage.getItem('isAdmin') === 'true') {
                                         showContextMenu(e, index);
                                     }
                                 });
                                 eventsGrid.appendChild(eventCard);
                             });
                         }
             
                         function removeEvent(index) {
                             events.splice(index, 1);
                             localStorage.setItem('events', JSON.stringify(events));
                             displayEvents(events);
                         }
             
                         function editEvent(index) {
                             const event = events[index];
                             document.getElementById('editEventIndex').value = index;
                             document.getElementById('editEventName').value = event.name;
                             document.getElementById('editEventDate').value = event.date;
                             document.getElementById('editEventLocation').value = event.location;
                             document.getElementById('editEventDescription').value = event.description;
                             editModal.style.display = 'block';
                         }
             
                         closeEditModalButton.addEventListener('click', function() {
                             editModal.style.display = 'none';
                         });
             
                         cancelEditButton.addEventListener('click', function() {
                             editModal.style.display = 'none';
                         });
             
                         window.addEventListener('click', function(event) {
                             if (event.target === editModal) {
                                 editModal.style.display = 'none';
                             }
                         });
             
                         editEventForm.addEventListener('submit', function(event) {
                             event.preventDefault();
                             const index = parseInt(document.getElementById('editEventIndex').value);
                             events[index].name = document.getElementById('editEventName').value;
                             events[index].date = document.getElementById('editEventDate').value;
                             events[index].location = document.getElementById('editEventLocation').value;
                             events[index].description = document.getElementById('editEventDescription').value;
                             localStorage.setItem('events', JSON.stringify(events));
                             displayEvents(events);
                             editModal.style.display = 'none';
                         });
             
                         addEventForm.addEventListener('submit', function(event) {
                             event.preventDefault();
                             const eventName = document.getElementById('eventName').value;
                             const eventDate = document.getElementById('eventDate').value;
                             const eventLocation = document.getElementById('eventLocation').value;
                             const eventDescription = document.getElementById('eventDescription').value;
             
                             const newEvent = {
                                 name: eventName,
                                 date: eventDate,
                                 location: eventLocation,
                                 description: eventDescription
                             };
             
                             events.push(newEvent);
                             localStorage.setItem('events', JSON.stringify(events));
                             displayEvents(events);
                             addEventForm.reset();
                         });
             
                         if (logoutLink) {
                             logoutLink.addEventListener('click', function(event) {
                                 event.preventDefault();
                                 localStorage.removeItem('isLoggedIn');
                                 localStorage.removeItem('isAdmin');
                                 checkLoginStatus();
                                 window.location.href = 'login.html';
                             });
                         }
             
                         checkLoginStatus();
                         displayEvents(events);
                     });
                 </script>

            </body>
        </html>
